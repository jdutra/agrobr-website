<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="AgroBR - Assistente AgrÃ­cola Inteligente via WhatsApp">
    <title>AgroBR - Seu AgrÃ´nomo no WhatsApp</title>
    
    <!-- React -->
    <script crossorigin src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>
    
    <style>
        body {
            margin: 0;
            padding: 0;
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        
        @keyframes fade-in {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        .animate-fade-in {
            animation: fade-in 0.3s ease-out;
        }
        
        /* Custom scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
        }
        
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        
        ::-webkit-scrollbar-thumb {
            background: #16a34a;
            border-radius: 3px;
        }
        
        ::-webkit-scrollbar-thumb:hover {
            background: #15803d;
        }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        // Componente principal do AgroBR
        const AgroBRApp = () => {
            const [messages, setMessages] = useState([
                {
                    type: 'bot',
                    text: 'OlÃ¡! ğŸ‘‹ Sou o AgroBR, seu assistente agrÃ­cola inteligente.\n\nğŸ“ Detectei sua localizaÃ§Ã£o: *Planaltina, DF*\nğŸŒ¾ Cultura principal: *Soja*\nğŸ“ Ãrea: *150 hectares*\n\nComo posso ajudar vocÃª hoje?',
                    time: '08:30',
                    avatar: 'ğŸ¤–'
                }
            ]);
            const [inputText, setInputText] = useState('');
            const [activeMenu, setActiveMenu] = useState('main');
            const [isTyping, setIsTyping] = useState(false);
            const [showWeatherAlert, setShowWeatherAlert] = useState(true);
            const messagesEndRef = useRef(null);

            const scrollToBottom = () => {
                messagesEndRef.current?.scrollIntoView({ behavior: "smooth" });
            };

            useEffect(() => {
                scrollToBottom();
            }, [messages]);

            const mainMenuOptions = [
                { id: 'weather', label: 'Clima & PrevisÃ£o', color: 'bg-blue-500', desc: 'PrevisÃ£o 15 dias' },
                { id: 'pest', label: 'Pragas & DoenÃ§as', color: 'bg-red-500', desc: 'DiagnÃ³stico IA' },
                { id: 'crop', label: 'Manejo de Cultura', color: 'bg-green-500', desc: 'RecomendaÃ§Ãµes' },
                { id: 'market', label: 'PreÃ§os & Mercado', color: 'bg-yellow-500', desc: 'Tempo real' },
                { id: 'inputs', label: 'Comprar Insumos', color: 'bg-purple-500', desc: 'Entrega rÃ¡pida' },
                { id: 'expert', label: 'Especialista', color: 'bg-indigo-500', desc: 'Consultoria' }
            ];

            const addMessage = (type, text, avatar = null) => {
                const newMessage = {
                    type,
                    text,
                    time: new Date().toLocaleTimeString('pt-BR', { hour: '2-digit', minute: '2-digit' }),
                    avatar: avatar || (type === 'bot' ? 'ğŸ¤–' : 'ğŸ‘¤')
                };
                setMessages(prev => [...prev, newMessage]);
            };

            const handleSendMessage = () => {
                if (!inputText.trim()) return;
                addMessage('user', inputText);
                setInputText('');
                
                setIsTyping(true);
                setTimeout(() => {
                    setIsTyping(false);
                    addMessage('bot', 'Recebi sua mensagem! Esta Ã© uma demonstraÃ§Ã£o interativa. Na versÃ£o completa, vocÃª terÃ¡ respostas personalizadas com IA. ğŸš€');
                }, 1500);
            };

            const handleOptionClick = (optionId) => {
                const option = mainMenuOptions.find(o => o.id === optionId);
                addMessage('user', option.label);
                
                setIsTyping(true);
                setTimeout(() => {
                    setIsTyping(false);
                    
                    const responses = {
                        weather: 'ğŸŒ¤ï¸ *PREVISÃƒO CLIMÃTICA*\nğŸ“ Planaltina, DF\n\n*HOJE*\nğŸŒ¡ï¸ 18Â°C - 29Â°C\nğŸ’§ Chuva: 70% (15-25mm)\nğŸ’¨ Vento: 15 km/h\n\n*PRÃ“XIMOS 7 DIAS*\nAmanhÃ£: â›ˆï¸ Chuva forte\n09/10: ğŸŒ¦ï¸ Parcialmente nublado\n10/10: â˜€ï¸ Ensolarado\n\nâš ï¸ Evite aplicaÃ§Ã£o hoje!',
                        pest: 'ğŸ› *DIAGNÃ“STICO IA*\n\nEnvie uma foto da planta e identificarei:\nâœ“ Ferrugem asiÃ¡tica\nâœ“ Lagarta\nâœ“ Percevejo\nâœ“ E mais!\n\n96% de acurÃ¡cia',
                        crop: 'ğŸŒ± *MANEJO PERSONALIZADO*\n\nSua soja estÃ¡ em V6\n\nğŸ’Š RecomendaÃ§Ã£o:\nUreia: 150 kg/ha\nAplicar nos prÃ³ximos 3 dias\n\nPrevisÃ£o colheita: Jan/2026\nProdutividade: 58 sc/ha',
                        market: 'ğŸ’° *PREÃ‡OS SOJA*\n\nBrasÃ­lia: R$ 142,50/sc â†—ï¸ +2,3%\nChicago: US$ 10.85/bu\n\nğŸ“ˆ TendÃªncia ALTA\nğŸ¯ RecomendaÃ§Ã£o: Fixar 30% agora',
                        inputs: 'ğŸ›’ *LOJA DE INSUMOS*\n\nğŸŒ¾ Soja BRS 388: R$ 185/sc\nğŸ’Š Ureia: R$ 2.800/ton\nğŸ›¡ï¸ Fungicida: R$ 87/L\n\nğŸšš Entrega em 48h\nğŸ’³ PIX, Boleto, CartÃ£o',
                        expert: 'ğŸ‘¨â€ğŸŒ¾ *ESPECIALISTAS*\n\nDr. JoÃ£o Silva\nâ­ 4.9/5 (187 consultas)\nğŸ’° R$ 150/hora\nğŸ“ DisponÃ­vel AGORA\n\nDeseja agendar?'
                    };
                    
                    addMessage('bot', responses[optionId] || 'Funcionalidade em desenvolvimento!');
                }, 1500);
            };

            return (
                <div className="flex flex-col h-screen max-w-md mx-auto bg-gray-50">
                    {/* Header */}
                    <div className="bg-gradient-to-r from-green-600 to-green-700 text-white p-4 shadow-xl">
                        <div className="flex items-center gap-3">
                            <div className="relative">
                                <div className="w-12 h-12 bg-white rounded-full flex items-center justify-center shadow-lg text-3xl">
                                    ğŸŒ±
                                </div>
                                <div className="absolute bottom-0 right-0 w-3 h-3 bg-green-400 rounded-full border-2 border-white"></div>
                            </div>
                            <div className="flex-1">
                                <h1 className="font-bold text-lg">AgroBR Assistant</h1>
                                <p className="text-xs text-green-100 flex items-center gap-1">
                                    <span className="w-2 h-2 bg-green-300 rounded-full animate-pulse"></span>
                                    Demo Interativa â€¢ IA Ativa
                                </p>
                            </div>
                        </div>
                    </div>

                    {/* Alert */}
                    {showWeatherAlert && (
                        <div className="bg-yellow-50 border-l-4 border-yellow-400 p-3 flex items-start gap-2">
                            <span className="text-yellow-600">âš ï¸</span>
                            <div className="flex-1 text-sm">
                                <p className="font-semibold text-yellow-800">Alerta ClimÃ¡tico</p>
                                <p className="text-yellow-700">Chuvas previstas. Evite aplicaÃ§Ãµes.</p>
                            </div>
                            <button onClick={() => setShowWeatherAlert(false)} className="text-yellow-600">âœ•</button>
                        </div>
                    )}

                    {/* Messages */}
                    <div className="flex-1 overflow-y-auto p-4 space-y-3 bg-gradient-to-b from-gray-50 to-white">
                        {messages.map((msg, idx) => (
                            <div key={idx} className={`flex ${msg.type === 'user' ? 'justify-end' : 'justify-start'} animate-fade-in`}>
                                <div className={`max-w-[85%] ${msg.type === 'user' ? '' : 'flex gap-2'}`}>
                                    {msg.type === 'bot' && (
                                        <div className="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center flex-shrink-0 text-lg">
                                            {msg.avatar}
                                        </div>
                                    )}
                                    <div>
                                        <div className={`rounded-2xl p-3 shadow-md ${
                                            msg.type === 'user' 
                                                ? 'bg-green-500 text-white rounded-br-none' 
                                                : 'bg-white text-gray-800 rounded-bl-none border border-gray-200'
                                        }`}>
                                            <p className="text-sm whitespace-pre-line leading-relaxed">{msg.text}</p>
                                            <p className={`text-xs mt-1 ${msg.type === 'user' ? 'text-green-100' : 'text-gray-400'}`}>
                                                {msg.time}
                                            </p>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        ))}

                        {/* Typing Indicator */}
                        {isTyping && (
                            <div className="flex justify-start">
                                <div className="flex gap-2">
                                    <div className="w-8 h-8 rounded-full bg-green-100 flex items-center justify-center text-lg">ğŸ¤–</div>
                                    <div className="bg-white rounded-2xl rounded-bl-none p-4 shadow-md border border-gray-200">
                                        <div className="flex gap-1">
                                            <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div>
                                            <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.1s' }}></div>
                                            <div className="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style={{ animationDelay: '0.2s' }}></div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        )}

                        {/* Menu */}
                        {activeMenu === 'main' && (
                            <div className="bg-white rounded-2xl p-4 shadow-xl border border-gray-200 animate-fade-in">
                                <p className="text-sm font-bold text-gray-700 mb-3">ğŸš€ Menu RÃ¡pido:</p>
                                <div className="grid grid-cols-2 gap-3">
                                    {mainMenuOptions.map(option => (
                                        <button
                                            key={option.id}
                                            onClick={() => handleOptionClick(option.id)}
                                            className={`${option.color} text-white rounded-xl p-4 flex flex-col items-center gap-2 hover:scale-105 transition-transform shadow-lg`}
                                        >
                                            <span className="text-xs font-bold text-center leading-tight">{option.label}</span>
                                            <span className="text-xs opacity-90">{option.desc}</span>
                                        </button>
                                    ))}
                                </div>
                            </div>
                        )}

                        <div ref={messagesEndRef} />
                    </div>

                    {/* Input */}
                    <div className="bg-white border-t border-gray-200 p-3 shadow-lg">
                        <div className="flex items-center gap-2">
                            <button className="text-gray-500 hover:text-green-600 transition-colors p-2 hover:bg-green-50 rounded-full">
                                ğŸ“¸
                            </button>
                            <input
                                type="text"
                                value={inputText}
                                onChange={(e) => setInputText(e.target.value)}
                                onKeyPress={(e) => e.key === 'Enter' && handleSendMessage()}
                                placeholder="Digite sua mensagem..."
                                className="flex-1 bg-gray-100 rounded-full px-4 py-3 text-sm focus:outline-none focus:ring-2 focus:ring-green-500 focus:bg-white transition-all"
                            />
                            <button
                                onClick={handleSendMessage}
                                className="bg-gradient-to-r from-green-600 to-green-700 text-white rounded-full p-3 hover:from-green-700 hover:to-green-800 transition-all shadow-lg hover:shadow-xl"
                            >
                                â¤
                            </button>
                        </div>
                    </div>

                    {/* Footer */}
                    <div className="bg-gradient-to-r from-green-600 to-green-700 text-white text-center py-2 text-xs font-medium">
                        ğŸ’¬ Funciona via WhatsApp â€¢ Sem instalar nada â€¢ GrÃ¡tis para testar
                    </div>
                </div>
            );
        };

        // Render
        ReactDOM.render(<AgroBRApp />, document.getElementById('root'));
    </script>

    <!-- Info Footer -->
    <div style="position: fixed; bottom: 20px; right: 20px; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 4px 12px rgba(0,0,0,0.15); max-width: 320px; z-index: 1000;">
        <p style="margin: 0; font-size: 13px; color: #374151; line-height: 1.5;">
            <strong style="color: #16a34a;">ğŸ“± AgroBR - Demo Interativa</strong><br>
            <span style="font-size: 12px;">Este Ã© um protÃ³tipo funcional. Para informaÃ§Ãµes sobre investimento ou parceria:</span><br>
            <a href="mailto:contato@agrobr.com.br" style="color: #16a34a; text-decoration: none; font-weight: 600;">ğŸ“§ contato@agrobr.com.br</a><br>
            <a href="https://wa.me/5561999999999" style="color: #16a34a; text-decoration: none; font-weight: 600;">ğŸ’¬ WhatsApp Demo</a>
        </p>
    </div>
</body>
</html>
